<ion-content class="add-product-page">
  <!-- Header -->
  <div class="page-header">
    <div class="header-top">
      <ion-button fill="clear" class="back-button" routerLink="/shop-owner/products" routerDirection="back">
        <ion-icon slot="start" name="chevron-back"></ion-icon>
      </ion-button>
      <div class="header-content">
        <h1>Add Product</h1>
        <p>Shop Owner â€¢ Inventory</p>
      </div>
      <ion-button fill="outline" class="draft-button">
        Draft
      </ion-button>
    </div>
  </div>

  <!-- Scrollable Content -->
  <div class="content-wrapper">
    <!-- Basics Section -->
    <form class="form-section" [formGroup]="productForm">
      <h2 class="section-title">Basics</h2>
      
      <div class="form-group">
        <label class="form-label">
          <ion-icon name="pricetag-outline"></ion-icon>
          Product name
        </label>
        <input type="text" class="form-input" placeholder="Enter product name" formControlName="name">
        <div class="validation-error" *ngIf="f['name'].invalid && (f['name'].dirty || f['name'].touched)">
          <span *ngIf="f['name'].hasError('required')">Product name is required</span>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          <ion-icon name="document-text-outline"></ion-icon>
          Short description
        </label>
        <textarea class="form-textarea" placeholder="Brief description" formControlName="description"></textarea>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">
            <ion-icon name="layers-outline"></ion-icon>
            Category
          </label>
          <select class="form-select" [(ngModel)]="category">
            <option>Select category</option>
            <option>Bakery</option>
            <option>Beverages</option>
            <option>Dairy</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">
            <ion-icon name="bookmark-outline"></ion-icon>
            Subcategory
          </label>
          <select class="form-select" [(ngModel)]="subcategory">
            <option>Select subcategory</option>
          </select>
        </div>
      </div>
    </form>

    <!-- Media Section -->
    <div class="form-section">
      <h2 class="section-title">Media</h2>
      
      <!-- Uploaded Images Preview -->
      <div class="images-preview" *ngIf="uploadedImages.length > 0">
        <div class="preview-grid">
          <div class="image-card" *ngFor="let image of uploadedImages">
            <img [src]="image.src" class="preview-image" [alt]="'Product image ' + image.id">
            <button class="remove-btn" (click)="removeImage(image.id)">
              <ion-icon name="close-circle"></ion-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- Media Upload Options -->
      <div class="media-upload-options">
        <button class="media-option camera-btn" (click)="takePhoto()">
          <ion-icon name="camera-outline"></ion-icon>
          <span>Take Photo</span>
        </button>
        <button class="media-option gallery-btn" (click)="selectFromGallery()">
          <ion-icon name="images-outline"></ion-icon>
          <span>Choose from Gallery</span>
        </button>
      </div>
      <p class="media-hint">Tip: Use clear, well-lit images of the product in-store. Max 5 images.</p>
    </div>

    <!-- Inventory Section -->
    <div class="form-section">
      <h2 class="section-title">Inventory</h2>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">
            <ion-icon name="hash"></ion-icon>
            SKU (optional)
          </label>
          <input type="text" class="form-input" placeholder="Enter SKU" [(ngModel)]="sku">
        </div>
        <div class="form-group">
          <label class="form-label">
            <ion-icon name="checkmark-circle-outline"></ion-icon>
            Availability
          </label>
          <select class="form-select" [(ngModel)]="availability">
            <option>In Stock</option>
            <option>Out of Stock</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">
            <ion-icon name="cash-outline"></ion-icon>
            Price (display only)
          </label>
          <input type="number" class="form-input" placeholder="Enter price" formControlName="price">
          <div class="validation-error" *ngIf="f['price'].invalid && (f['price'].dirty || f['price'].touched)">
            <span *ngIf="f['price'].hasError('required')">Price is required</span>
            <span *ngIf="f['price'].hasError('min')">Price cannot be negative</span>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">
            <ion-icon name="cube-outline"></ion-icon>
            In-store quantity
          </label>
          <input type="number" class="form-input" placeholder="Enter quantity" [(ngModel)]="quantity">
        </div>
      </div>

      <p class="info-text">No online checkout. Price and stock are for discovery in the Customer App.</p>
    </div>

    <!-- Visibility Section -->
    <div class="form-section">
      <h2 class="section-title">Visibility</h2>
      
      <div class="checkbox-group">
        <input type="checkbox" id="shop-location" [(ngModel)]="showAtLocation" class="checkbox-input">
        <label for="shop-location" class="checkbox-label">
          <ion-icon name="location-outline"></ion-icon>
          Show at this shop location
        </label>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="public-listing" [(ngModel)]="publicListing" class="checkbox-input">
        <label for="public-listing" class="checkbox-label">
          <ion-icon name="eye-outline"></ion-icon>
          Public listing
        </label>
      </div>
    </div>

    <!-- Attributes Section -->
    <div class="form-section">
      <h2 class="section-title">Attributes</h2>
      
      <div class="attribute-group">
        <label class="attribute-label">
          <ion-icon name="shirt-outline"></ion-icon>
          Variant (e.g., Size/Color)
        </label>
        <ion-button fill="clear" class="add-option-btn">
          Add option
        </ion-button>
      </div>
    </div>

    <!-- Bottom Actions -->
    <div class="bottom-actions">
      <ion-button fill="outline" class="save-draft-btn" (click)="saveDraft()">
        <ion-icon slot="start" name="document-outline"></ion-icon>
        Save draft
      </ion-button>
      <ion-button fill="solid" class="publish-btn" (click)="publishProduct()" [disabled]="productForm.invalid">
        <ion-icon slot="start" name="checkmark"></ion-icon>
        Publish
      </ion-button>
    </div>
  </div>
</ion-content>
