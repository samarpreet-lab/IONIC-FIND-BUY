<ion-content class="dashboard-page">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-top">
      <h1>Shop Owner</h1>
      <ion-button fill="clear" size="small" class="login-button" (click)="goToLogin()">
        <ion-icon name="log-out-outline"></ion-icon>
      </ion-button>
    </div>

    <!-- Shop Card -->
    <ion-card class="shop-card">
      <div class="shop-card-content">
        <div class="shop-avatar">
          <ion-avatar>
            <span>DDA</span>
          </ion-avatar>
        </div>
        <div class="shop-info">
          <h2>Desi Darbar - Amritsar</h2>
          <p>Open â€¢ 11:00 AM - 11:00 PM</p>
        </div>
        <ion-button fill="clear" size="small" (click)="editShop()">
          <ion-icon name="pencil-outline"></ion-icon>
          Edit
        </ion-button>
      </div>

      <!-- Shop Stats -->
      <div class="shop-stats">
        <ion-card class="stat-card">
          <div class="stat-content">
            <div class="stat-value">456</div>
            <div class="stat-label">Today's nearby views</div>
            <div class="stat-change">+18% vs yesterday</div>
          </div>
        </ion-card>
        <ion-card class="stat-card">
          <div class="stat-content">
            <div class="stat-value">42</div>
            <div class="stat-label">Favorites added</div>
            <div class="stat-detail">Top item: Amritsari Kulcha</div>
          </div>
        </ion-card>
        <ion-card class="stat-card">
          <div class="stat-content">
            <div class="stat-value">1.2 Km avg</div>
            <div class="stat-label">discovery</div>
            <div class="stat-detail">Local reach this week</div>
          </div>
        </ion-card>
        <ion-card class="stat-card">
          <div class="stat-content">
            <div class="stat-value">8.5k</div>
            <div class="stat-label">impressions</div>
            <div class="stat-detail">Reached this month</div>
          </div>
        </ion-card>
      </div>
    </ion-card>

    <!-- Recent Reviews -->
    <div class="recent-section">
      <h3>Recent reviews</h3>
      <ion-card class="review-card" *ngFor="let review of recentReviews">
        <div class="review-header">
          <ion-avatar class="review-avatar">
            <img [src]="review.avatar" [alt]="review.name">
          </ion-avatar>
          <div class="review-user">
            <h4>{{ review.name }}</h4>
            <div class="rating">
              <ion-icon name="star" color="warning" *ngFor="let i of [1,2,3,4,5]"></ion-icon>
            </div>
          </div>
        </div>
        <p class="review-text">{{ review.text }}</p>
      </ion-card>
    </div>
  </div>

  <!-- Quick Actions (Sticky at bottom) -->
  <div class="quick-actions">
    <h3>Quick actions</h3>
    <div class="action-buttons">
      <ion-button fill="outline" expand="block" (click)="addProduct()">
        <ion-icon slot="start" name="add-circle-outline"></ion-icon>
        Add product
      </ion-button>
      <ion-button fill="outline" expand="block" (click)="updateHours()">
        <ion-icon slot="start" name="time-outline"></ion-icon>
        Update hours
      </ion-button>
      <ion-button fill="outline" expand="block" (click)="editLocation()">
        <ion-icon slot="start" name="location-outline"></ion-icon>
        Edit location
      </ion-button>
    </div>
  </div>

  <!-- Today at a Glance -->
  <div class="today-section">
    <h3>Today at a glance</h3>
    <ion-list lines="none" class="glance-list">
      <ion-item>
        <ion-label>Open status</ion-label>
        <ion-badge slot="end" color="success">Open</ion-badge>
      </ion-item>
      <ion-item>
        <ion-label>Next peak window</ion-label>
        <ion-text slot="end">8:30 - 10:30 AM</ion-text>
      </ion-item>
      
    </ion-list>
  </div>
</ion-content>

<!-- Update Hours Modal -->
<ion-modal [isOpen]="isHoursModalOpen" (didDismiss)="closeHoursModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="closeHoursModal()">Close</ion-button>
        </ion-buttons>
        <ion-title>Update Shop Hours</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="hours-modal-content">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Shop Opening & Closing Times</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <!-- Opening Time -->
            <ion-item>
              <ion-label>Opening Time</ion-label>
              <ion-input 
                type="time" 
                [(ngModel)]="openingTime"
                placeholder="HH:mm">
              </ion-input>
            </ion-item>

            <!-- Closing Time -->
            <ion-item>
              <ion-label>Closing Time</ion-label>
              <ion-input 
                type="time" 
                [(ngModel)]="closingTime"
                placeholder="HH:mm">
              </ion-input>
            </ion-item>
          </ion-list>

          <!-- Save Button -->
          <ion-button 
            expand="block" 
            color="primary"
            (click)="saveHours()">
            Save Hours
          </ion-button>
        </ion-card-content>
      </ion-card>
    </ion-content>
  </ng-template>
</ion-modal>
