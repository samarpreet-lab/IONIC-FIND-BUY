/* Purple navigation theme for the tabs
   - Deep purple bar background
   - Unselected tabs: light/soft purple
   - Selected tab: vibrant purple with white text/icons
   - Hover/focus: icon + label become white
   - Tabs are evenly spaced and avoid overflow/cropping
*/
:host {
  ion-tab-bar {
    --background: transparent;
    --border: none;
    display: flex;
    justify-content: center;
    /* reduce bottom padding so tabs sit closer to the bottom edge */
    padding: 0 0.6rem 0rem;
    position: relative;
    overflow: visible;
  }

  /* card background for the tab bar */
  ion-tab-bar::before {
    content: '';
    position: absolute;
    inset: 0.08rem 0.12rem 0.06rem;
    border-radius: 14px;
    background: #290a70;
    // box-shadow: 0 12px 28px rgba(15,6,40,0.55);
    z-index: -1;
  }

  ion-tab-bar::part(container) {
    width: 100%;
    margin: 0 auto;
    max-width: 820px;
    border-radius: 12px;
    /* tighten container vertical padding */
    padding: 0.14rem 0.34rem;
    display: flex;
    gap: 0.5rem;
    align-items: center;
    overflow: visible;
  }

  /* tabs fill space evenly */
  ion-tab-button {
    --background: transparent;
    --ripple-color: rgba(255,255,255,0.12);
    flex: 1 1 0%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    /* reduce gap between icon and label */
    gap: 0.08rem;
    /* reduce vertical padding so content sits lower */
    padding: 0.28rem 0.6rem;
    border-radius: 10px;
    color: rgba(255,255,255,0.92);
    transition: background 160ms ease, color 160ms ease, transform 140ms ease;
    position: relative;
    overflow: visible;
  }

  ion-tab-button ion-icon {
    font-size: 1.05rem;
    color: currentColor;
  }

  ion-tab-button ion-label {
    font-size: 0.78rem;
    font-weight: 600;
    color: currentColor;
    line-height: 1;
    text-align: center;
    /* remove extra bottom spacing inside the label */
    margin-bottom: 0;
  }

  /* Unselected tabs: soft/light purple */
  ion-tab-button:not(.tab-selected) {
    background: linear-gradient(180deg, rgba(139, 92, 233, 0.14), rgba(139, 92, 233, 0.08));
    color: rgba(255,255,255,0.9);
  }

  ion-tab-button:not(.tab-selected):hover,
  ion-tab-button:not(.tab-selected):focus {
    background: linear-gradient(180deg, rgba(139,92,233,0.22), rgba(139,92,233,0.14));
    color: #ffffff;
    transform: translateY(-2px);
  }

  /* make sure icon and label specifically become white on hover/focus */
  ion-tab-button:not(.tab-selected):hover ion-icon,
  ion-tab-button:not(.tab-selected):focus ion-icon,
  ion-tab-button:not(.tab-selected):hover ion-label,
  ion-tab-button:not(.tab-selected):focus ion-label {
    color: #ffffff !important;
    opacity: 1;
  }

  /* ensure SVG inside ion-icon also turns white (covers ion-icon rendering) */
  ion-tab-button:not(.tab-selected):hover ion-icon svg,
  ion-tab-button:not(.tab-selected):focus ion-icon svg {
    fill: #ffffff !important;
    stroke: #ffffff !important;
  }

  /* make selected tab's icon/svg explicitly white too */
  ion-tab-button.tab-selected ion-icon,
  ion-tab-button.tab-selected ion-icon svg,
  ion-tab-button.tab-selected ion-label {
    color: #ffffff !important;
    fill: #ffffff !important;
    stroke: #ffffff !important;
  }

  /* Selected: show a smaller inner pill so the indicator fits inside the tab */
  ion-tab-button.tab-selected {
    /* keep the tab background subtle, and draw a smaller pill using ::after */
    background: linear-gradient(180deg, rgba(139, 92, 233, 0.08), rgba(139, 92, 233, 0.06));
    color: #ffffff;
    transform: none; /* keep inside container */
    box-shadow: none;
  }

  /* inner pill centered inside the tab */
  ion-tab-button.tab-selected::after {
    content: '';
    position: absolute;
    /* span full height of the tab button so the shape fills the nav height reliably */
    top: 0;
    bottom: 0;
    left: 50%;
    width: 82%;
    transform: translateX(-50%);
    /* match the tab's rounding so it looks like an inset shape */
    border-radius: 10px;
    background: linear-gradient(180deg, #7b2ef0 0%, #5a16d6 100%);
    box-shadow: 0 8px 18px rgba(90,22,214,0.16);
    z-index: 0;
    pointer-events: none;
  }

  /* icon/label must sit above the inner pill */
  ion-tab-button.tab-selected ion-icon,
  ion-tab-button.tab-selected ion-label {
    z-index: 1;
    position: relative;
  }

  /* ensure content is above decorative layers */
  ion-tab-button ion-icon,
  ion-tab-button ion-label {
    position: relative;
    z-index: 1;
  }

  ion-tab-button:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(139,92,233,0.14);
  }

  @media (max-width: 520px) {
    ion-tab-bar::part(container) {
      gap: 0.28rem;
      padding: 0.22rem;
    }

    ion-tab-button ion-label {
      font-size: 0.72rem;
    }

    ion-tab-button {
      padding: 0.36rem 0.36rem;
    }
  }

}
